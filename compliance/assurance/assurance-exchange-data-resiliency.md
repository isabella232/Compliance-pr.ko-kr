---
title: Microsoft 365의 Exchange Online 데이터 복원력
description: 이 문서에서는 데이터 및 데이터 원본 내에서 데이터 탄력성의 다양한 측면에 Exchange Online Microsoft 365.
ms.author: robmazz
author: robmazz
manager: laurawi
ms.reviewer: sosstah
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
ms.localizationpriority: medium
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
- MS-Compliance
f1.keywords:
- NOCSH
ms.custom: seo-marvel-apr2020
titleSuffix: Microsoft Service Assurance
hideEdit: true
ms.openlocfilehash: 0e3f050c1f28fa0ca8ac89c8bb8d7151cf9cba10
ms.sourcegitcommit: 4c00fd65d418065d7f53216c91f455ccb3891c77
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/23/2021
ms.locfileid: "58482000"
---
# <a name="exchange-online-data-resiliency-in-microsoft-365"></a>Exchange Online 데이터 탄력성 Microsoft 365

>[!IMPORTANT]
>사서함 콘텐츠를 보존하는 여러 가지 방법으로 계속 투자함에 따라 In-Place 관리 센터(EAC)에서 Exchange 보류의 사용 중지를 Exchange Online. 2020년 7월 1일부터는 보류를 새로 만들 수 In-Place 없습니다. 그러나 여전히 EAC에서 또는 PowerShell에서 **Set-MailboxSearch** cmdlet을 In-Place 보류를 관리할 Exchange Online 있습니다. 그러나 2020년 10월 1일부터는 보류를 관리할 In-Place 없습니다. EAC에서 또는 **Remove-MailboxSearch** cmdlet을 사용하여 제거할 수만 있습니다. 하이브리드 In-Place 및 Exchange Server Exchange 보류를 사용하는 것은 계속 지원됩니다. In-Place 보류의 사용 중지에 대한 자세한 Exchange Online 레거시 [eDiscovery](/microsoft-365/compliance/legacy-ediscovery-retirement)도구의 사용 중지를 참조하세요.

보존 In-Place 삭제된 항목 및 수정된 항목의 원래 버전을 포함하여 모든 사서함 콘텐츠를 보존합니다. 이러한 모든 사서함 항목은 [In-Place eDiscovery 검색에서 반환됩니다.](/exchange/security-and-compliance/in-place-ediscovery/in-place-ediscovery) 사용자 In-Place 보류를 설정하면 해당 보관 사서함의 콘텐츠(사용하도록 설정된 경우)도 보류 중이 되어 eDiscovery 검색에 반환됩니다.

Exchange 데이터베이스에 영향을 줄 수 있는 손상에는 일반적으로 하드웨어(특히 저장소 하드웨어) 문제로 인해 발생하는 물리적 손상과 다른 요인으로 인해 발생하는 논리적 손상의 두 가지 유형이 있습니다. 일반적으로 데이터베이스 내에서 발생할 수 있는 논리적 손상에는 두 가지 유형이 Exchange 있습니다.

- **데이터베이스 논리적 손상** - 데이터베이스 페이지 체크 um이 일치하지만 페이지의 데이터가 논리적으로 잘못되었습니다. 이 오류는 데이터베이스 엔진(ESE(Extensible Storage Engine))이 데이터베이스 페이지를 작성하려고 할 때 그리고 운영 체제에서 성공 메시지를 반환하는 경우에도 데이터가 디스크에 기록되지 않는 경우 또는 잘못된 장소에 기록될 때 발생할 수 있습니다. 이를 *손실 플러시* 라고 합니다. ESE에는 데이터베이스 및 기타 데이터 손실 시나리오의 물리적 손상을 방지하도록 설계된 다양한 기능과 보호 기능이 포함되어 있습니다. 손실된 플러시로 인해 데이터가 손실되지 않도록 ESE에는 데이터베이스에 손실된 플러시 검색 메커니즘과 이를 수정하는 기능(단일 페이지 복원)이 포함되어 있습니다.
- **저장소 논리적** 손상 - 데이터가 사용자가 예상하지 않는 방식으로 추가, 삭제 또는 조작됩니다. 이러한 사례는 타사 응용 프로그램에 의해 발생됩니다. 일반적으로 손상은 사용자가 손상된 것으로 보기 는 점에서 손상됩니다. Exchange 저장소는 논리적 손상을 생성한 트랜잭션을 일련의 유효한 MAPI 작업으로 고려합니다. [2016의](/exchange/security-and-compliance/create-or-remove-in-place-holds) 현재 Exchange Online 저장소 논리적 손상으로부터 보호합니다(사용자 또는 응용 프로그램에 의해 콘텐츠가 영구적으로 삭제되지 않도록 방지). 

Exchange Online 로그 검사와 로그 재생 중에 복제된 로그 파일에 대해 여러 가지 일관성 검사를 수행하게 됩니다. 이러한 일관성 확인은 물리적 손상이 시스템에 의해 복제되지 않도록 합니다. 예를 들어 로그 검사 중에 로그 파일을 확인하고 로그 파일에 기록된 체크 um이 메모리에 생성된 체크 um과 일치하는지 확인하는 물리적 무결성 검사가 있습니다. 또한 로그 파일 헤더를 검사하여 로그 헤더에 기록된 로그 파일 서명이 로그 파일의 서명과 일치하는지 검사합니다. 로그를 재생하는 동안 로그 파일은 추가적으로 세분화됩니다. 예를 들어 데이터베이스 헤더에는 로그 파일의 서명과 비교하여 일치하는지 확인한 로그 서명도 포함되어 있습니다. 

Exchange Online 사서함 데이터의 손상으로부터 보호하는 Exchange 네이티브 데이터 보호를 사용하면 여러 서버 및 여러 데이터 센터에서 응용 프로그램 수준 복제를 활용하는 복원 전략과 손상 또는 기타 이유로 인해 데이터가 손실되지 않습니다. 이러한 기능에는 다음과 같이 Microsoft 또는 Exchange Online 응용 프로그램 자체에서 관리하는 기본 기능이 포함됩니다.

- [데이터 가용성 그룹](/exchange/back-up-email)
- 단일 비트 수정 
- 온라인 데이터베이스 검색 
- 손실 플러시 감지 
- 단일 페이지 복원 
- 사서함 복제 서비스 
- 로그 파일 검사 
- 탄력적인 파일 시스템에 배포 

이전에 나열된 기본 기능에 대한 자세한 내용은 하이퍼링크를 선택하고 추가 정보와 하이퍼링크가 없는 항목에 대한 자세한 내용은 다음을 참조하세요. 이러한 기본 기능 외에도 Exchange Online 다음과 같이 고객이 관리할 수 있는 데이터 탄력성 기능도 포함되어 있습니다. 
- [단일 항목 복구(기본적으로 사용)](/exchange/recipients-in-exchange-online/manage-user-mailboxes/recover-deleted-messages) 
- [원본 위치 유지 및 소송 보존](/exchange/security-and-compliance/in-place-and-litigation-holds) 
- [삭제된 항목 보존 및 Soft-Deleted 사서함(둘 다 기본적으로 사용하도록 설정)](/exchange/recipients-in-exchange-online/delete-or-restore-mailboxes) 

## <a name="database-availability-groups"></a>데이터베이스 사용 가능 그룹 
모든 사서함 Microsoft 365 [DAG(데이터베이스](/exchange/back-up-email) 사용 가능 그룹)에서 호스트되어 동일한 지역 내의 지리적으로 분리된 데이터 센터로 복제됩니다. 가장 일반적인 구성은 4개의 데이터 센터에 있는 4개의 데이터베이스 복사본입니다. 그러나 일부 지역은 데이터 센터 수가 적습니다(데이터베이스는 인도의 3개의 데이터 센터와 오스트레일리아와 일본의 두 데이터 센터로 복제됩니다). 그러나 모든 사서함 데이터베이스에는 여러 데이터 센터에 분산된 4개의 복사본이 있어 소프트웨어, 하드웨어 및 데이터 센터 오류로부터 사서함 데이터를 보호할 수 있습니다. 

이 4개 복사본 중 3개는 고가용성으로 구성됩니다. 네 번째 복사본은 지진된 데이터베이스 [복사본으로 구성됩니다.](/Exchange/high-availability/manage-ha/activate-lagged-db-copies) 지체된 데이터베이스 복사본은 개별 사서함 복구 또는 사서함 항목 복구를 위한 것이 아니며, 이 도구의 목적은 시스템 전체의 치명적인 논리적 손상이 드물게 발생하면 복구 메커니즘을 제공하는 것입니다. 

Exchange Online 데이터베이스 복사본은 7일 로그 파일 재생 시간으로 구성됩니다. 또한 Exchange Replay Lag Manager를 사용하여 동적 로그 파일 재생을 통해 지운 복사본에 대해 동적 로그 파일 재생을 제공하도록 설정되어 있으며, 이 경우 데이터베이스 복사본이 자체 복구 및 로그 파일 증가를 관리할 수 있습니다. 지각된 데이터베이스 복사본은 Exchange Online 지정 시간 백업이 보장되지는 않습니다. Exchange Online 데이터베이스 복사본은 디스크 오류로 인해 대기된 복사본이 포함된 디스크가 손실되는 기간, 자동 재생으로 인해 고가용성 복사본이 되기 때문에 가용성 임계값(일반적으로 약 90%)을 가지고, 대기된 데이터베이스 복사본이 로그 재생 큐를 다시 구성하는 기간으로 인해 발생합니다. 

## <a name="transport-resilience"></a>전송 탄력성 
Exchange Online 두 가지 기본 전송 탄력성 기능인 섀도 중복성 및 보안 네트워크가 포함되어 있습니다. 섀도 중복성은 메시지가 전송 중일 때 메시지의 중복 복사본을 보관합니다. 보안 네트워크는 메시지가 배달된 후 메시지의 중복 복사본을 보관합니다. 

섀도 중복성에서는 각 Exchange Online 전송 서버가 보내는 서버에 메시지를 성공적으로 받기 전에 받은 각 메시지의 복사본을 만드는 것입니다. 이렇게 하면 전송 파이프라인의 모든 메시지가 전송 중 중복됩니다. 전송 Exchange Online 원본 메시지가 손실된 것으로 확인하면 메시지의 중복 복사본이 다시 전달됩니다. 

보안 네트워크는 사서함 서버의 전송 서비스에 연결된 전송 큐입니다. 이 큐는 서버에 의해 성공적으로 처리된 메시지의 복사본을 저장합니다. 사서함 데이터베이스 또는 서버 오류가 사서함 데이터베이스의 기한이 지난 복사본을 활성화해야 하는 경우 보안 네트워크 큐의 메시지가 사서함 데이터베이스의 새 활성 복사본으로 자동으로 다시 전송됩니다. 보안 네트워크도 중복되므로 단일 오류 지점으로 전송을 제거합니다. 기본 보안 네트워크와 섀도 보안 네트워크의 개념을 사용하며, 기본 보안 네트워크가 12시간 이상 사용할 수 없는 경우 다시 전송 요청은 섀도 다시 전송 요청이 되고 메시지는 섀도 보안 네트워크에서 다시 전송됩니다.

보안 네트워크에서 메시지 다시 전송은 DAG 및 사서함 데이터베이스 복사본을 관리하는 Microsoft Exchange 복제 서비스의 Active Manager 구성 요소에 의해 자동으로 시작됩니다. 보안 네트워크에서 메시지를 다시 전송하는 데 수동 작업은 필요하지 않습니다. 

## <a name="single-bit-correction"></a>단일 비트 수정 
ESE에는 하드웨어 오류의 결과로 발생하는 단일 비트 CRC 오류(단일 비트 대칭 이동)를 검색하고 해결하는 메커니즘이 포함되어 있습니다(물리적 손상을 나타내는 경우). 이러한 오류가 발생하면 ESE에서 자동으로 오류를 수정하고 이벤트 로그에 이벤트를 기록합니다. 

## <a name="online-database-scanning"></a>온라인 데이터베이스 검색 
온라인 데이터베이스 검색(데이터베이스 확인 합계라고도 알려지기)은 ESE에서 데이터베이스 일관성 검사를 사용하여 각 페이지를 읽고 페이지 손상을 검사하는 프로세스입니다. 주요 목적은 트랜잭션 작업에서 검색되지 않을 수 있는 물리적 손상 및 손실된 플러시를 감지하는 것입니다. 데이터베이스 검색은 또한 저장소 후 크래시 작업을 수행 합니다. 크래시로 인해 공간이 누출될 수 있으며 온라인 데이터베이스 검색은 손실된 공간을 찾아 복구합니다. 시스템은 모든 데이터베이스가 7일마다 한 번씩 완전히 검사됩니다. 

## <a name="lost-flush-detection"></a>손실 플러시 감지 
완료된 것으로 반환된 디스크 하위 시스템/운영 체제가 실제로 디스크에 기록되지 않았거나 잘못된 위치에 작성된 데이터베이스 쓰기 작업이 손실된 경우 플러시가 발생합니다. 손실 플러시 인시던트는 데이터베이스 논리적 손상을 초래할 수 있으므로 데이터가 손실되지 않도록 ESE에는 손실된 플러시 검색 메커니즘이 포함되어 있습니다. 데이터베이스 페이지가 수동 복사본에 기록되는 경우 활성 복사본에서 손실된 플러시가 검색됩니다. 손실 플러시가 감지되면 ESE는 페이지 패치 프로세스를 사용하여 프로세스를 복구할 수 있습니다. 

## <a name="single-page-restore"></a>단일 페이지 복원 
페이지 패치라고도 하는 단일 페이지 복원은 손상된 데이터베이스 페이지가 정상 복제 데이터베이스의 정상 복사본으로 대체되는 자동 프로세스입니다. 손상된 페이지에 대한 복구 프로세스는 데이터베이스 복사본이 활성 상태인지 수동인지에 따라 결정됩니다. 활성 데이터베이스 복사본이 손상된 페이지를 만나면 해당 복사본이 복사하는 페이지가 최신 상태인 경우 해당 복제 데이터베이스 중 하나의 페이지를 복사할 수 있습니다. 이 프로세스는 사서함 데이터베이스 복제의 기초인 로그 스트림에 페이지에 대한 요청을 저장하여 수행됩니다. 복제 데이터베이스가 페이지 요청을 만나는 즉시 요청하는 데이터베이스 복사본으로 페이지의 복사본을 보내 응답합니다. 또한 단일 페이지 복원은 복제 데이터베이스가 현재 오프라인 상태인 경우에도 활성이 복제 데이터베이스에서 페이지를 요청하는 비동기 통신 메커니즘을 제공합니다. 

이러한 복사본은 항상 활성 복사본 뒤에 있기 때문에 수동 데이터베이스 복사본이 손상된 경우 활성 복사본에서 수동 복사본으로 페이지를 복사하는 것이 항상 안전합니다. 수동 데이터베이스 복사본은 기본적으로 고가용성이 있으므로 페이지 패치 프로세스 중에 로그 재생이 일시 중단되지만 로그 복사는 계속됩니다. 수동 데이터베이스 복사본은 활성 복사본에서 손상된 페이지의 복사본을 검색하고, 필요한 최대 로그 생성 요구 사항을 충족하는 로그 파일이 복사 및 검사될 때까지 기다렸다가 손상된 페이지를 패치합니다. 페이지가 패치된 후 로그 재생이 다시 시작됩니다. 이 프로세스는 지워진 데이터베이스 복사본에 대해 동일합니다. 단, 이 프로세스는 먼저 패치 가능한 상태를 달성하는 데 필요한 모든 로그 파일을 재생합니다. 

## <a name="mailbox-replication-service"></a>사서함 복제 서비스 
사서함 이동은 대규모 전자 메일 서비스를 관리하는 핵심 부분입니다. 항상 업데이트된 기술 및 하드웨어 및 버전 업그레이드가 있으므로 엔지니어가 이 작업을 수행할 수 있는 강력한 제한 시스템을 통해 사서함을 사용자에게 투명하게 유지(프로세스 전체에서 온라인에 유지)하는 것이 중요합니다. 그리고 사서함이 커지고 사서함이 커지면서 프로세스가 수월하게 확장됩니다. 

MRS(Exchange 사서함 복제 서비스)는 데이터베이스 간에 사서함을 이동하는 작업입니다. 이동하는 동안 MRS는 사서함 내의 모든 항목에 대한 일관성 검사를 수행합니다. 일관성 문제가 발견되면 MRS는 문제를 해결하거나 손상된 항목을 건너뛰어 사서함에서 손상을 제거합니다. 

MRS는 EXCHANGE ONLINE 구성 요소이기 때문에 향후 감지되는 새로운 형태의 손상을 해결하기 위해 코드를 변경할 수 있습니다. 예를 들어 MRS가 수정할 수 없는 일관성 문제가 발견되면 손상을 분석하고 MRS 코드를 변경하고 불일치(방법을 이해한 경우)를 수정할 수 있습니다. 

## <a name="log-file-checks"></a>로그 파일 검사 
Exchange 데이터베이스에서 생성된 모든 트랜잭션 로그 파일에는 여러 가지 형식의 일관성 확인이 필요합니다. 로그 파일을 만들면 먼저 비트 패턴이 작성된 다음 일련의 로그 쓰기가 수행됩니다. 이 구조를 Exchange Online 일련의 검사(손실 플러시, CRC 및 기타 검사)를 실행하여 기록되는 각 로그 파일의 유효성을 검사하고 복제될 때 다시 검사할 수 있습니다. 

## <a name="deployment-on-resilient-file-system"></a>탄력적인 파일 시스템에 배포 
파일 시스템 수준에서 손상이 발생하지 않도록 Exchange Online 복구 기능을 제공하기 위해 ReFS(복구 파일 시스템) 파티션에 배포하고 있습니다. ReFS는 데이터 Windows Server 2012 보다 탄력적으로 사용할 수 있도록 설계된 파일 시스템으로, 데이터 가용성 및 무결성을 최대화합니다. 특히 ReFS는 메타데이터가 업데이트되는 방식이 개선되어 데이터를 보다 잘 보호하고 데이터 손상 사례를 줄일 수 있습니다. 또한 체크 아웃을 사용하여 데이터 손상을 쉽게 찾아 복구할 수 있도록 파일 데이터 및 메타데이터의 무결성을 확인할 수 있습니다. 

Exchange Online 여러 ReFS 이점을 활용합니다. 
- 데이터 무결성의 탄력성은 데이터 손상 인시던트 수를 줄입니다. 손상 인시던트 수를 줄이면 불필요한 데이터베이스 다시 시드 횟수가 감소합니다. 
- 데이터 볼륨에서 회색 오류가 발생하기 전에 고객 데이터 손상을 해결할 수 있도록 메타데이터에서 실행되는 체크 아웃을 통해 손상 사례를 보다 빨리 더 빨리 감지할 수 있습니다.
- 성능에 영향을 주지 않고 대규모 데이터 집합(페타바이트 및 더 큰 데이터 집합)에 잘 작동하도록 디자인
- BitLocker 암호화와 같은 Exchange Online 다른 기능을 지원할 수 있습니다. 

Exchange Online ReFS 기능의 이점도 있습니다. 
- **무결성(무결성 스트림)** - ReFS는 일반적으로 데이터 손실을 일으킬 수 있는 많은 일반적인 오류로부터 데이터를 보호하는 방식으로 데이터를 저장합니다. Microsoft 365 검색에서는 무결성 스트림 사용하여 초기 디스크 손상 감지 및 파일 콘텐츠 체크 아웃에 도움을 줄 수 있습니다. 또한 이 기능은 'Torn Writes'로 인한 손상 인시던트(정전 등으로 인해 쓰기 작업이 완료되지 않은 경우)를 줄입니다. 
- **가용성(Salvage)** - ReFS는 데이터의 가용성에 우선 순위를 지정합니다. 지금까지 파일 시스템은 복구를 위해 시스템을 오프라인으로 전환해야 하는 데이터 손상에 주로 해당합니다. 손상이 발생하는 경우는 드물지만 ReFS는 라이브 볼륨의 네임스페이스에서 손상된 데이터를 제거하고 복구할 수 없는 손상 데이터의 영향을 받지 않도록 하는 기능인 복구를 구현합니다. 복구 기능을 적용하고 데이터 손상을 Exchange Online 데이터베이스 볼륨에 적용하면 손상 및 복구 작업 시간 사이에 영향을 받지 않는 데이터베이스를 손상된 볼륨에 정상으로 유지할 수 있습니다. 이 구조는 일반적으로 이러한 디스크 손상 문제의 영향을 받는 데이터베이스의 가용성을 높입니다. 
